%% 商品查詢狀態機
%% 來源：BzSkuInfoServices.java, LargeFurnitureService.java

stateDiagram-v2
    [*] --> 輸入查詢
    輸入查詢 --> 條碼查詢 : 長度 >= 10
    輸入查詢 --> SKU查詢 : 長度 < 10

    條碼查詢 --> TBL_BARCODE
    TBL_BARCODE --> 找到SKU : 有結果
    TBL_BARCODE --> TBL_SKU備用 : 無結果
    TBL_SKU備用 --> 找到SKU

    SKU查詢 --> 找到SKU

    找到SKU --> 基本資訊驗證
    基本資訊驗證 --> 商品不存在 : SKU不存在
    基本資訊驗證 --> 商品類型驗證 : SKU存在

    商品類型驗證 --> 外包服務處理 : 026-888
    商品類型驗證 --> 一般商品處理 : 非026-888

    外包服務處理 --> 載入工種資訊

    一般商品處理 --> 可訂購驗證
    可訂購驗證 --> 商品上鎖 : 類型不在C08
    可訂購驗證 --> 廠商狀態驗證 : 類型在C08

    廠商狀態驗證 --> DC商品AOH查詢 : 廠商凍結且DC商品
    廠商狀態驗證 --> 商品上鎖 : 廠商凍結且非DC
    廠商狀態驗證 --> 大型家具判斷 : 廠商正常

    大型家具判斷 --> 載入安裝服務
    DC商品AOH查詢 --> 載入安裝服務

    載入安裝服務 --> 回傳SkuInfoVO
    載入工種資訊 --> 回傳SkuInfoVO
    商品上鎖 --> 回傳SkuInfoVO
    商品不存在 --> [*]
    回傳SkuInfoVO --> [*]
