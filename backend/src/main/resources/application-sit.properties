# ================================================================================
# SIT - Local Development Environment
# 啟動方式: java -jar app.jar --spring.profiles.active=sit
# ================================================================================

# 模擬 Oracle 資料庫設定
spring.datasource.url=jdbc:h2:mem:testdb;MODE=Oracle;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# 自動建立Schema (會根據實體類別自動產生資料表)
# 或手動指定 src/main/resources/schema.sql
spring.sql.init.mode=always
spring.sql.init.platform=h2

# 啟用H2 Console 介面 (http://localhost:8080/h2-console)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# 忽略 Jasypt (本地開發不需要加密設定檔)
spring.config.import=optional:classpath:application-secret.properties

# 指定初始化資料腳本 (只在 H2 環境執行)
spring.sql.init.schema-locations=classpath:schema-sit.sql
spring.sql.init.data-locations=classpath:data-sit.sql

# ================================================================================
# Security Configuration (Keycloak OAuth2)
# 開發環境: 使用 Mock 或本地 Keycloak
# ================================================================================
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8180/realms/som
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost:8180/realms/som/protocol/openid-connect/certs

# ================================================================================
# CORS Configuration
# ================================================================================
app.cors.allowed-origins=http://localhost:4200
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true