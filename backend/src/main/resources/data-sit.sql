-- Sample data for H2 Database (Development/Test)
-- Feature: 001-keycloak-user-login
-- Updated to match UAT Oracle structure

-- TBL_CHANNEL (通路/系統別) - Static data
INSERT INTO TBL_CHANNEL (CHANNEL_ID, CHANNEL_NAME, STATUS) VALUES ('SO', 'Special Order', 'Y');
INSERT INTO TBL_CHANNEL (CHANNEL_ID, CHANNEL_NAME, STATUS) VALUES ('TTS', 'TTS', 'Y');
INSERT INTO TBL_CHANNEL (CHANNEL_ID, CHANNEL_NAME, STATUS) VALUES ('APP', 'APP', 'Y');

-- TBL_STORE (店別) - Sample stores (only required fields)
INSERT INTO TBL_STORE (STORE_ID, CHANNEL_ID, STORE_NAME, STATUS) VALUES ('S001', 'SO', '台北旗艦店', 'Y');
INSERT INTO TBL_STORE (STORE_ID, CHANNEL_ID, STORE_NAME, STATUS) VALUES ('S002', 'SO', '新竹店', 'Y');
INSERT INTO TBL_STORE (STORE_ID, CHANNEL_ID, STORE_NAME, STATUS) VALUES ('S003', 'SO', '台中店', 'Y');
INSERT INTO TBL_STORE (STORE_ID, CHANNEL_ID, STORE_NAME, STATUS) VALUES ('S004', 'SO', '高雄店', 'Y');
INSERT INTO TBL_STORE (STORE_ID, CHANNEL_ID, STORE_NAME, STATUS) VALUES ('S005', 'SO', '台南店', 'Y');
INSERT INTO TBL_STORE (STORE_ID, CHANNEL_ID, STORE_NAME, STATUS) VALUES ('T001', 'TTS', 'TTS門市A', 'Y');
INSERT INTO TBL_STORE (STORE_ID, CHANNEL_ID, STORE_NAME, STATUS) VALUES ('T002', 'TTS', 'TTS門市B', 'Y');
INSERT INTO TBL_STORE (STORE_ID, CHANNEL_ID, STORE_NAME, STATUS) VALUES ('A001', 'APP', 'APP門市A', 'Y');

-- TBL_USER (使用者) - Sample users
-- User 1: Active user with SO,TTS permissions
INSERT INTO TBL_USER (EMP_ID, CHANNEL_ID, STORE_ID, EMP_NAME, SYSTEM_FLAG, DISABLED_FLAG, START_DATE, END_DATE)
VALUES ('john.doe', 'SO', 'S001', '張三', 'SO,TTS', NULL, '2024-01-01', '2025-12-31');

-- User 2: Active user with all permissions (全區)
INSERT INTO TBL_USER (EMP_ID, CHANNEL_ID, STORE_ID, EMP_NAME, SYSTEM_FLAG, DISABLED_FLAG, START_DATE, END_DATE)
VALUES ('admin.user', 'SO', NULL, '系統管理員', 'SO,TTS,APP', NULL, '2024-01-01', '2026-12-31');

-- User 3: Active user with SO only
INSERT INTO TBL_USER (EMP_ID, CHANNEL_ID, STORE_ID, EMP_NAME, SYSTEM_FLAG, DISABLED_FLAG, START_DATE, END_DATE)
VALUES ('mary.wang', 'SO', 'S003', '王小美', 'SO', NULL, '2024-06-01', '2025-12-31');

-- User 4: Disabled user
INSERT INTO TBL_USER (EMP_ID, CHANNEL_ID, STORE_ID, EMP_NAME, SYSTEM_FLAG, DISABLED_FLAG, START_DATE, END_DATE)
VALUES ('disabled.user', 'SO', 'S002', '已停用帳號', 'SO', 'Y', '2024-01-01', '2025-12-31');

-- User 5: Expired user
INSERT INTO TBL_USER (EMP_ID, CHANNEL_ID, STORE_ID, EMP_NAME, SYSTEM_FLAG, DISABLED_FLAG, START_DATE, END_DATE)
VALUES ('expired.user', 'SO', 'S001', '過期帳號', 'SO', NULL, '2023-01-01', '2023-12-31');

-- User 6: User without SYSTEM_FLAG
INSERT INTO TBL_USER (EMP_ID, CHANNEL_ID, STORE_ID, EMP_NAME, SYSTEM_FLAG, DISABLED_FLAG, START_DATE, END_DATE)
VALUES ('no.permission', 'SO', 'S001', '無權限帳號', NULL, NULL, '2024-01-01', '2025-12-31');

-- User 7: User without dates set
INSERT INTO TBL_USER (EMP_ID, CHANNEL_ID, STORE_ID, EMP_NAME, SYSTEM_FLAG, DISABLED_FLAG, START_DATE, END_DATE)
VALUES ('no.dates', 'SO', 'S001', '未設日期帳號', 'SO', NULL, NULL, NULL);

-- TBL_USER_MAST_STORE (使用者主店別)
-- john.doe -> S001 (台北旗艦店)
INSERT INTO TBL_USER_MAST_STORE (EMP_ID, STORE_ID, CHANNEL_ID) VALUES ('john.doe', 'S001', 'SO');

-- admin.user -> NULL (全區權限)
INSERT INTO TBL_USER_MAST_STORE (EMP_ID, STORE_ID, CHANNEL_ID) VALUES ('admin.user', NULL, 'SO');

-- mary.wang -> S003 (台中店)
INSERT INTO TBL_USER_MAST_STORE (EMP_ID, STORE_ID, CHANNEL_ID) VALUES ('mary.wang', 'S003', 'SO');

-- disabled.user -> S002
INSERT INTO TBL_USER_MAST_STORE (EMP_ID, STORE_ID, CHANNEL_ID) VALUES ('disabled.user', 'S002', 'SO');

-- TBL_USER_STORE (使用者支援店別)
-- john.doe supports S002, S003
INSERT INTO TBL_USER_STORE (EMP_ID, STORE_ID, CHANNEL_ID) VALUES ('john.doe', 'S002', 'SO');
INSERT INTO TBL_USER_STORE (EMP_ID, STORE_ID, CHANNEL_ID) VALUES ('john.doe', 'S003', 'SO');

-- mary.wang supports S004, S005
INSERT INTO TBL_USER_STORE (EMP_ID, STORE_ID, CHANNEL_ID) VALUES ('mary.wang', 'S004', 'SO');
INSERT INTO TBL_USER_STORE (EMP_ID, STORE_ID, CHANNEL_ID) VALUES ('mary.wang', 'S005', 'SO');

-- User 8: SIT 測試帳號 (對應 Keycloak H00199/Aa123456)
INSERT INTO TBL_USER (EMP_ID, CHANNEL_ID, STORE_ID, EMP_NAME, SYSTEM_FLAG, DISABLED_FLAG, START_DATE, END_DATE)
VALUES ('H00199', 'SO', 'S001', 'SIT測試人員', 'SO,TTS,APP', NULL, '2024-01-01', '2026-12-31');

-- H00199 主店別 -> S001 (台北旗艦店)
INSERT INTO TBL_USER_MAST_STORE (EMP_ID, STORE_ID, CHANNEL_ID) VALUES ('H00199', 'S001', 'SO');

-- H00199 支援店別 -> S002, S003
INSERT INTO TBL_USER_STORE (EMP_ID, STORE_ID, CHANNEL_ID) VALUES ('H00199', 'S002', 'SO');
INSERT INTO TBL_USER_STORE (EMP_ID, STORE_ID, CHANNEL_ID) VALUES ('H00199', 'S003', 'SO');
