# 業務確認會議 - 定價邏輯審查

## 會議資訊

- **目的**：確認定價邏輯程式碼追蹤的業務規則並解決關鍵問題
- **日期**：[待排程 - 第2週]
- **時長**：90分鐘
- **必須出席人員**：
  - 業務經理（決策者）
  - 財務經理（財務影響評估）
  - 產品經理（業務規則負責人）
  - 技術主管（實作負責人）
  - QA主管（測試覆蓋率）

## 會議目標

1. 確認程式碼追蹤發現的關鍵業務規則
2. 解決需要業務決策的已識別問題
3. 驗證定價邏輯假設
4. 核准 Rewrite-Spec v1.2 定價章節
5. 簽署測試場景和驗收標準

---

## 議程

### 1. 簡介（5分鐘）

**背景**：已完成第一階段第1週的程式碼追蹤，目標是將定價邏輯覆蓋率從 87% 提升至 95%+。

**審查文件**：
- 工種變價分攤追蹤報告（892行）
- 特殊會員折扣追蹤報告（1,096行）
- Type 2 成本加成折扣追蹤報告（1,596行）

---

### 2. 🚨 關鍵問題：Type 2 負折扣（價格上漲）（20分鐘）

**優先級**：關鍵 - 需要立即決策

**問題描述**：
Type 2（成本加成）會員折扣可能導致**價格上漲**而非折扣，當加成計算結果超過原始售價時。

**當前行為**：
```
範例：
- 資料庫單位成本：90 TWD
- 加成率：30%（TBL_CDISC 配置）
- 計算價格：ceil(90 × 1.3) = 117 TWD
- 含稅（1.05）：floor(117 × 1.05) = 122 TWD
- 原始 POS 價格：100 TWD
- 折扣金額：100 - 122 = -22 TWD ❌

結果：會員支付 122 TWD 而非 100 TWD（多付 22%！）
```

**程式碼位置**：`SoFunctionMemberDisServices.java:509`

**影響分析**：
- ✅ **客戶滿意度**：會員期待折扣，而非價格上漲
- ✅ **法律合規**：宣傳「會員折扣」卻收取更高價格可能違反消費者保護法
- ✅ **品牌信任**：偽裝成「折扣」的價格上漲會損害品牌聲譽
- ✅ **財務影響**：未知 - 需要數據分析（見下方查詢）

**數據分析查詢**（會前執行）：
```sql
-- 查找歷史負折扣案例
SELECT
    COUNT(*) AS negative_discount_count,
    SUM(od.POS_AMT - od.ACT_POS_AMT) AS total_overcharge,
    AVG(od.POS_AMT - od.ACT_POS_AMT) AS avg_overcharge
FROM TBL_ORDER_DETL od
INNER JOIN TBL_ORDER o ON od.ORDER_ID = o.ORDER_ID
WHERE od.POS_AMT_CHANGE_PRICE = 'Y'
  AND (od.POS_AMT - od.ACT_POS_AMT) < 0  -- 負折扣
  AND o.MEMBER_CARD_ID IS NOT NULL
  AND o.CREATE_DATE >= ADD_MONTHS(SYSDATE, -12);  -- 最近12個月
```

**✅ 需要決策：選擇一個方案**

**方案 A：防止負折扣（推薦）**
```java
if(newPrice > posAmt) {
    logger.warn("成本加成會導致價格上漲，跳過折扣");
    return;  // 跳過此折扣
}
```
- ✅ **優點**：保護客戶、防止法律問題、易於實作
- ❌ **缺點**：部分會員可能無法獲得 Type 2 折扣（會回退到特殊折扣，如果 Type 0/1 也為空）

**方案 B：限制在原價**
```java
if(newPrice > posAmt) {
    newPrice = posAmt;  // 會員支付原價（無折扣、無漲價）
}
```
- ✅ **優點**：會員不會多付錢、行為透明
- ❌ **缺點**：沒有提供折扣優惠（中性）

**方案 C：允許負折扣（當前行為）**
```java
// 不變更 - 繼續允許價格上漲
```
- ❌ **缺點**：法律風險、客戶投訴、品牌損害

**建議**：**方案 A - 防止負折扣**

**行動項目**：
- [ ] 會議記錄業務決策
- [ ] 更新 Rewrite-Spec v1.2
- [ ] 將驗證程式碼加入實作待辦清單
- [ ] 為負折扣場景建立測試案例

---

### 3. Type 2 類別排除審查（10分鐘）

**問題**：SUB_DEPT_ID 025 和 026 被排除在 Type 1（降毛利）和 Type 2（成本加成）折扣之外。

**當前實作**：
```java
// SoFunctionMemberDisServices.java:533-539
private boolean checkSkuSubDeptId(String discType, OrderDetlVO item) {
    if(("2".equals(discType) || "1".equals(discType)) &&
       ("025".equals(item.getSubDeptId()) || "026".equals(item.getSubDeptId()))) {
        return true;  // 從 Type 1/2 排除
    }
    return false;
}
```

**業務問題**：
1. **025 和 026 類別是什麼？**（例如：運輸服務、安裝費）
2. **為何從 Type 1/2 排除但允許 Type 0？**（允許折扣，不允許降毛利）
3. **是否應排除其他類別？**（例如：027、特殊服務）
4. **此規則是否有文件記錄？**（OpenSpec 中未找到）

**建議**：
- 在 Rewrite-Spec 中記錄類別排除規則
- 提供業務理由（例如：「標準化運輸費用不能進行成本加成」）
- 建立類別排除配置表（更易維護）

**行動項目**：
- [ ] 業務提供官方類別清單和理由
- [ ] 更新 Rewrite-Spec 的類別排除章節
- [ ] 考慮配置驅動的排除清單

---

### 4. 工種價格分攤規則（15分鐘）

**問題**：工種安裝/運送價格按項目價值比例分攤，餘額由最後一個項目吸收。

**當前實作**：
- 比例分配：`項目分攤 = 總工種價格 × (項目價格 / 訂單總價)`
- 餘額處理：最後項目吸收所有四捨五入餘額
- 免費安裝：當 `actualInstallAmt = 0` 時，所有分攤金額 = 0

**從程式碼確認的業務規則**：
1. **R1**：免費安裝 → 所有安裝 SKU 的 preApportion = 0
2. **R2**：付費安裝 → 按項目價值比例分配
3. **R3**：最後項目吸收所有餘額（可能有 ±10 TWD 差異）
4. **R4**：適用於安裝和運送兩種工種

**業務問題**：
1. **最後項目吸收餘額是否可接受？**
   - 替代方案：按比例分配餘額
   - 替代方案：總是將餘額向客戶有利方向四捨五入

2. **免費安裝是否應始終覆蓋分攤？**
   - 當前：如果 actualInstallAmt = 0，所有項目分攤成本為 0
   - 替代方案：即使免費安裝也使用基於成本的分攤（用於毛利追蹤）

3. **最後項目的最大可接受餘額？**
   - 當前：無限制（可能 ±10 TWD 或更多）
   - 提議：限制在 ±5 TWD，超出部分分配給多個項目

**範例場景**：
```
訂單總額：10,000 TWD
安裝總額：500 TWD
項目：
  - 項目 1：5,000 TWD（50%）→ 250 TWD 安裝
  - 項目 2：3,000 TWD（30%）→ 150 TWD 安裝
  - 項目 3：2,000 TWD（20%）→ 100 TWD 安裝

四捨五入後：
  - 項目 1：250 TWD
  - 項目 2：150 TWD
  - 項目 3：100 TWD
  總計：500 TWD ✅（此例無餘額）

有餘額範例：
訂單總額：10,001 TWD
安裝：501 TWD
  - 項目 1：250.475 → 四捨五入為 250 TWD
  - 項目 2：150.285 → 四捨五入為 150 TWD
  - 項目 3：100.19 → 100 TWD
  總和：500 TWD
  餘額：501 - 500 = 1 TWD

最後項目（C）調整：100 + 1 = 101 TWD

結果：
  - 項目 A：preApportion = 250 TWD
  - 項目 B：preApportion = 150 TWD
  - 項目 C：preApportion = 101 TWD（吸收 +1 TWD）
  總計：501 TWD ✅
```

**建議**：確認當前行為可接受或定義新的餘額處理政策。

**行動項目**：
- [ ] 業務確認餘額吸收政策
- [ ] 在 Rewrite-Spec 中記錄理由
- [ ] 為邊界案例（大餘額）添加測試場景

---

### 5. 特殊會員折扣 vs Type 0/1/2 優先級（10分鐘）

**問題**：特殊會員折扣（Type CT）僅在 Type 0/1/2 **全部返回空結果**時執行。

**當前實作**：
```java
// BzSoServices.java:4459-4466
//會員折扣-Discounting (Type 0)
memberDiscSkus.addAll(soComputeFunctionMemberDis(..., "0", ...));
//會員折扣-Down Margin (Type 1)
memberDiscSkus.addAll(soComputeFunctionMemberDis(..., "1", ...));
//會員折扣-Cost Markup (Type 2)
memberDiscSkus.addAll(soComputeFunctionMemberDis(..., "2", ...));

if(memberDiscSkus.isEmpty()) {
    //特殊會員折扣（回退機制）
    memberDiscSkus.addAll(soComputeMemberDisForSpecial(...));
}
```

**業務邏輯**：
- Type CT = 對於沒有特定折扣配置的會員的「兜底」回退機制
- 互斥：如果**任何**項目獲得 Type 0/1/2 折扣，**所有**項目跳過 Type CT
- 兩階段匹配：精確 SKU → 類別萬用字元（'000000000'）

**業務問題**：
1. **「全有或全無」行為是否是有意的？**
   - 當前：如果 10 個項目中有 1 個匹配 Type 0，所有 10 個項目跳過 Type CT
   - 替代方案：允許逐項回退（項目 A 使用 Type 0，項目 B 使用 Type CT）

2. **Type CT 是否應比 Type 0/1/2 優先級低？**
   - 當前：是（僅在 0/1/2 全部為空時執行）
   - 替代方案：最高折扣獲勝（比較 Type 0/1/2 vs CT，應用對客戶最有利的）

3. **萬用字元 SKU '000000000' 是否為標準慣例？**
   - 用於系統範圍內的類別級折扣
   - 應記錄為標準實務

**建議**：在 Rewrite-Spec 中清楚記錄互斥邏輯及業務理由。

**行動項目**：
- [ ] 確認「全有或全無」行為是有意的
- [ ] 將 Type CT 記錄為回退機制
- [ ] 為混合折扣場景添加測試場景

---

### 6. 稅金四捨五入政策一致性（10分鐘）

**問題**：不同折扣類型使用不同的稅金四捨五入方法。

**當前實作**：

| 折扣類型 | 稅金四捨五入 | 範例（60.9 TWD） | 自何時起 |
|---------|-------------|-----------------|---------|
| Type 0（折扣） | Math.ceil（無條件進位） | 61 TWD | 舊版 |
| Type 1（降毛利） | Math.ceil（無條件進位） | 61 TWD | 舊版 |
| **Type 2（成本加成）** | **Math.floor（無條件捨去）** | **60 TWD** | **2020-05-07** |
| Type CT（特殊） | Math.ceil（無條件進位） | 61 TWD | 舊版 |

**Type 2 變更歷史**：
```java
// 2020-05-07 之前：ROUND_HALF_UP
disconut = new BigDecimal((double)disconut * salesTax)
    .setScale(0, BigDecimal.ROUND_HALF_UP).intValue();

// 2020-05-07 之後：ROUND_FLOOR
disconut = new BigDecimal((double)disconut * salesTax)
    .setScale(0, BigDecimal.ROUND_FLOOR).intValue();
```

**影響範例**：
```
含稅前價格：58 TWD
稅金計算：58 × 1.05 = 60.9 TWD

Type 0/1/CT：ceil(60.9) = 61 TWD
Type 2：floor(60.9) = 60 TWD

差異：每件商品 1 TWD（大訂單會累積）
```

**業務問題**：
1. **Type 2 為何使用不同的四捨五入方式？**
   - 可能原因：對客戶更友善（成本加成應利於會員）
   - 替代原因：2020 年審計的財務要求

2. **所有折扣類型是否應使用一致的四捨五入？**
   - **方案 A**：全部使用 floor（對客戶最友善）
   - **方案 B**：全部使用 ceil（傳統、保守）
   - **方案 C**：保持不同（當前行為，需要文件記錄）

3. **2020-05-07 變更的業務理由是什麼？**
   - ⚠️ **需要行動**：研究該日期的變更請求

**建議**：標準化所有折扣類型的四捨五入政策，或記錄差異的明確業務理由。

**行動項目**：
- [ ] 研究 2020-05-07 變更原因
- [ ] 業務決定：標準化或記錄差異
- [ ] 更新 Rewrite-Spec 的稅金四捨五入政策章節

---

### 7. 第 508 行重複賦值（5分鐘）🔍

**問題**：Type 2 折扣計算中可能存在程式碼 bug。

**程式碼位置**：`SoFunctionMemberDisServices.java:493-509`
```java
// 第 493-507 行：根據商品類型更新價格
if(GoodsType.P.equals(orderDetlVO.getGoodsType())) {
    orderDetlVO.setActPosAmt(disconut + StringUtils.EMPTY);  // 在此設定
    orderDetlVO.setTotalPrice((disconut * qty) + StringUtils.EMPTY);
    orderDetlVO.setPosAmtChangePrice(true);
} else if(isInstallSku(orderDetlVO.getGoodsType())) {
    orderDetlVO.setPreApportion(disconut + StringUtils.EMPTY);
    orderDetlVO.setInstallPrice(disconut + StringUtils.EMPTY);
    orderDetlVO.setActInstallPrice((disconut * qty) + StringUtils.EMPTY);
    orderDetlVO.setInstallChangePrice(true);
} else if(isDeliverySku(orderDetlVO.getGoodsType())) {
    orderDetlVO.setPreApportion(disconut + StringUtils.EMPTY);
    orderDetlVO.setDeliveryPrice(disconut + StringUtils.EMPTY);
    orderDetlVO.setActDeliveryPrice((disconut * qty) + StringUtils.EMPTY);
    orderDetlVO.setDeliveryChangePrice(true);
}

// 第 508 行：重複 - 無論商品類型總是執行
orderDetlVO.setActPosAmt(disconut + StringUtils.EMPTY);  // 再次設定！
```

**影響分析**：
- **GoodsType.P**：冗餘但無害（設定相同值兩次）
- **安裝 SKU**：不正確 - 將安裝價格覆寫到 actPosAmt
- **運送 SKU**：不正確 - 將運送價格覆寫到 actPosAmt

**業務問題**：
1. **第 508 行是 bug 還是有意為之？**
   - 可能是 bug（重複程式碼）
   - 應該刪除

2. **是否有安裝/運送 Type 2 折扣定價不正確的報告？**
   - 檢查支援工單/客戶投訴
   - 檢查財務對帳報告

**建議**：刪除第 508 行（重複賦值）並為安裝/運送 SKU Type 2 折扣添加測試覆蓋。

**行動項目**：
- [ ] 技術團隊審查程式碼歷史（第 508 行何時加入？）
- [ ] QA 在正式環境測試安裝/運送 SKU Type 2 折扣
- [ ] 如確認為 bug，將修復加入實作待辦清單

---

### 8. OpenSpec 中缺失的業務規則（10分鐘）

**問題**：程式碼中發現的關鍵業務規則未記錄在 OpenSpec（舊版規格）中。

**缺失的文件**：

| 規則 | 在程式碼中找到 | OpenSpec 中缺失 |
|------|---------------|----------------|
| Type 2 類別排除（025/026） | ✅ 是 | ❌ 否 |
| 特殊折扣互斥 | ✅ 是 | ❌ 否 |
| 工種餘額吸收 | ✅ 是 | ❌ 否 |
| 萬用字元 SKU '000000000' 模式 | ✅ 是 | ❌ 否 |
| Type 2 成本來源（AVG_COST） | ✅ 是 | ❌ 否 |
| 稅金四捨五入差異 | ✅ 是 | ❌ 否 |
| 免費安裝零分攤 | ✅ 是 | ❌ 否 |
| 負折扣可能性 | ✅ 是 | ❌ 否 |

**影響**：
- 新開發人員無法從文件理解業務邏輯
- 系統重寫有不正確實作的風險
- 原始開發人員離職時知識流失

**業務問題**：
1. **OpenSpec 是否為權威業務規則文件？**
   - 如果是：需要用程式碼發現的規則更新 OpenSpec
   - 如果否：什麼是真相來源？

2. **Rewrite-Spec 是否應在未來取代 OpenSpec？**
   - 建議：是，具有版本控制和變更追蹤

3. **誰負責維護業務規則文件？**
   - 產品經理？業務分析師？技術文件工程師？

**建議**：建立 Rewrite-Spec v1.2 為新的權威規格，並棄用過時的 OpenSpec 章節。

**行動項目**：
- [ ] 業務確認 Rewrite-Spec 為權威文件
- [ ] 指定文件維護負責人，以便未來更新
- [ ] 建立文件審查流程

---

### 9. 測試場景核准（10分鐘）

**請求**：業務核准追蹤報告中記錄的測試場景。

**依類別的測試覆蓋**：

**工種分攤**（4個場景）：
1. 標準比例分配
2. 免費安裝（零分攤）
3. 最後項目吸收餘額
4. 單項目訂單（無需分配）

**特殊會員折扣**（5個場景）：
1. 精確 SKU 匹配（Type CT）
2. 類別萬用字元匹配（'000000000'）
3. 互斥（Type 0 存在，跳過 CT）
4. 免稅項目折扣
5. 已變價項目排除

**Type 2 成本加成**（5個場景）：
1. 標準產品成本加成（應稅）
2. 類別級折扣（免稅）
3. 運輸類別排除（025）
4. 安裝 SKU 成本加成
5. **負折扣（價格上漲）** ⚠️

**總計**：14個測試場景覆蓋3個定價領域

**業務問題**：
1. **測試場景是否實際且具代表性？**
2. **是否有其他需要測試的邊界案例？**
3. **可接受的通過/失敗標準是什麼？**
4. **是否應添加效能測試場景？**（例如：1000項訂單）

**行動項目**：
- [ ] 業務核准測試場景
- [ ] QA 主管從場景建立詳細測試計畫
- [ ] 將場景加入第6階段測試套件實作

---

### 10. Rewrite-Spec v1.2 審查（10分鐘）

**請求**：預先核准 Rewrite-Spec v1.2 內容大綱。

**規劃章節**（基於已完成的追蹤）：

```markdown
## 3.2 會員折扣邏輯

### 3.2.1 概覽
- 執行順序：Type 0 → Type 1 → Type 2 → Type CT（回退）
- 互斥規則
- CRM 整合點

### 3.2.2 Type 0：折扣
- 售價的百分比折扣
- 促銷金額加回
- Math.ceil 四捨五入
- [OpenSpec 既有內容]

### 3.2.3 Type 1：降毛利
- 直接降低價格
- 類別排除（025/026）
- 價格變更旗標設定
- [OpenSpec 既有內容]

### 3.2.4 Type 2：成本加成 ⭐ 新增
- 基於成本的定價公式
- 單位成本來源（TBL_SKU_STORE.AVG_COST）
- 稅金處理（ROUND_FLOOR）
- 類別排除（025/026）
- 負折扣防止 ⚠️
- 測試場景

### 3.2.5 Type CT：特殊會員折扣 ⭐ 新增
- 回退機制
- 兩階段匹配（精確 → 萬用字元）
- 萬用字元 SKU '000000000' 慣例
- 與 Type 0/1/2 互斥
- 測試場景

### 3.3 工種價格分攤 ⭐ 新增
- 比例分配演算法
- 最後項目吸收餘額
- 免費安裝特殊處理
- 安裝 vs 運送工種差異
- 測試場景

### 3.4 稅金計算政策 ⭐ 新增
- 按折扣類型的四捨五入政策
- 營業稅率（1.05）
- 免稅交易處理
- 零稅模式
```

**業務問題**：
1. **此結構是否適當？**
2. **是否應分離為多個文件？**（每個領域一個）
3. **需要什麼詳細程度？**（摘要 vs. 實作細節）
4. **誰審查和核准規格更新？**（單一核准者或委員會）

**時程**：
- 草稿完成：第2週結束
- 審查期：第3週
- 核准目標：第3週結束

**行動項目**：
- [ ] 業務核准內容大綱
- [ ] 為第3週指定審查者
- [ ] 安排後續審查會議

---

### 11. 下一步與行動項目摘要（5分鐘）

**需要立即決策（今天）**：
1. ✅ **關鍵**：Type 2 負折扣政策（方案 A/B/C）
2. ✅ 稅金四捨五入政策標準化
3. ✅ 測試場景核准

**第2週行動**：
1. 在會議記錄中記錄決策
2. 用已核准內容更新 Rewrite-Spec v1.2
3. 執行歷史負折扣的數據分析查詢
4. 研究 2020-05-07 稅金四捨五入變更理由
5. 發送電子郵件給產品經理確認自動觸發定價

**第3週行動**：
1. Rewrite-Spec v1.2 審查和核准
2. 開始第2階段：促銷邏輯追蹤
3. 為已確認問題實作程式碼修復（如有）

**待解決問題記錄**：
- [ ] Type 2 負折扣政策
- [ ] 類別排除理由（025/026）
- [ ] 餘額吸收可接受性
- [ ] 稅金四捨五入政策一致性
- [ ] 第 508 行重複賦值
- [ ] OpenSpec vs Rewrite-Spec 權威
- [ ] 測試場景核准
- [ ] Rewrite-Spec v1.2 內容結構

---

## 會議材料檢查清單

**會前**：
- [ ] 發送含議程的會議邀請（本文件）
- [ ] 附加三份追蹤文件供預讀
- [ ] 執行數據分析查詢（負折扣、類別使用）
- [ ] 研究 2020-05-07 變更歷史
- [ ] 準備簡報投影片（可選）

**會議期間**：
- [ ] 錄製會議（經同意）
- [ ] 記錄詳細會議記錄
- [ ] 記錄所有決策及理由
- [ ] 為行動項目指定負責人和到期日

**會後**：
- [ ] 24小時內分發會議記錄
- [ ] 根據決策更新 Rewrite-Spec v1.2
- [ ] 為程式碼修復建立實作工單
- [ ] 安排後續會議（如需要）

---

## 附錄 A：數據分析查詢

### 查詢 1：Type 2 負折扣歷史分析
```sql
SELECT
    o.ORDER_ID,
    o.MEMBER_CARD_ID,
    od.SKU_NO,
    od.UNIT_COST,
    od.POS_AMT AS ORIGINAL_PRICE,
    od.ACT_POS_AMT AS NEW_PRICE,
    (od.POS_AMT - od.ACT_POS_AMT) AS DISCOUNT_AMT,
    (od.POS_AMT - od.ACT_POS_AMT) * od.QUANTITY AS TOTAL_OVERCHARGE,
    od.QUANTITY,
    o.CREATE_DATE
FROM TBL_ORDER_DETL od
INNER JOIN TBL_ORDER o ON od.ORDER_ID = o.ORDER_ID
WHERE od.POS_AMT_CHANGE_PRICE = 'Y'
  AND (od.POS_AMT - od.ACT_POS_AMT) < 0
  AND o.MEMBER_CARD_ID IS NOT NULL
  AND o.CREATE_DATE >= ADD_MONTHS(SYSDATE, -12)
ORDER BY TOTAL_OVERCHARGE;
```

### 查詢 2：類別 025/026 使用分析
```sql
SELECT
    od.SUB_DEPT_ID,
    COUNT(DISTINCT od.ORDER_ID) AS order_count,
    COUNT(*) AS item_count,
    COUNT(CASE WHEN od.POS_AMT_CHANGE_PRICE = 'Y' THEN 1 END) AS price_changed_count,
    SUM(od.POS_AMT * od.QUANTITY) AS total_revenue
FROM TBL_ORDER_DETL od
INNER JOIN TBL_ORDER o ON od.ORDER_ID = o.ORDER_ID
WHERE od.SUB_DEPT_ID IN ('025', '026', '027')
  AND o.CREATE_DATE >= ADD_MONTHS(SYSDATE, -3)
GROUP BY od.SUB_DEPT_ID
ORDER BY od.SUB_DEPT_ID;
```

### 查詢 3：Type 2 折扣配置稽核
```sql
SELECT
    cd.DISCOUNT_ID,
    cd.CHANNEL_ID,
    cd.SKU_NO,
    cd.SUB_DEPT_ID,
    cd.DISC_PER,
    CASE
        WHEN cd.SKU_NO = '000000000' THEN '類別級'
        ELSE 'SKU級'
    END AS MATCH_LEVEL,
    CASE
        WHEN cd.SUB_DEPT_ID IN ('025', '026') THEN '警告：已排除類別'
        ELSE '有效'
    END AS STATUS
FROM TBL_CDISC cd
WHERE cd.DISC_TYPE = '2'
  AND SYSDATE BETWEEN cd.START_DATE AND cd.END_DATE
ORDER BY STATUS, cd.DISCOUNT_ID;
```

---

**會議議程結束**
